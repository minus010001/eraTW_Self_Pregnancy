;変数の書き換えなどを伴なうバージョンUP用
@VERSION_UP
SIF !GETBIT(FLAG:1000, 1)
	CALL KAISYONASI
SIF !GETBIT(FLAG:1000, 2) && FLAG:地主
	CALL MODE_NOUMIN
SIF !GETBIT(FLAG:1000, 3)
	CALL BUGFIX_KOIBITO
SETBIT FLAG:1000, 3
SIF !GETBIT(FLAG:1000, 4)
	CALL BUGFIX_KOIBITO
SETBIT FLAG:1000, 4
@KAISYONASI
SETBIT FLAG:1000, 1
PRINTFORML 有主动向對方告白的膽量嗎？
CALL ASK_YN("那是當然","做不到的")
IF !RESULT
	PRINTFORMW 沒有使用無志氣模式
	FLAG:甲斐性無 = 0
ELSE
	PRINTFORMW 開啓了無志氣模式（部分命令不能使用・加强被推倒的概率）
	FLAG:甲斐性無 = 1
ENDIF

@BUGFIX_KOIBITO
VARSET LOCAL

PRINTFORML 为了消除以前版本的BUG、把恋人重置到只剩一个了
PRINTFORMW 送上奇跡之石以表达歉意

FLAG:追加恋人枠 = 0
ITEM:奇跡之石 += 1

FOR LOCAL,1,CHARANUM
	SIF TALENT:LOCAL:恋人
		LOCAL:1 ++
NEXT



SIF LOCAL:1 <= 1
	RETURN


PRINTFORML 请选择要維持恋人状態的角色

FOR LOCAL,1,CHARANUM
	SIF TALENT:LOCAL:恋人
		PRINTFORMLC [{LOCAL}] %CALLNAME:LOCAL%
NEXT
PRINTFORML 
INPUT
SIF TALENT:RESULT:恋人
	LOCAL:2 = RESULT

FOR LOCAL,1,CHARANUM
	TALENT:LOCAL:恋人 = 0
NEXT

TALENT:(LOCAL:2):恋人 = LOCAL:2
TALENT:MASTER:恋人 = LOCAL:2

PRINTFORMW 重置成功